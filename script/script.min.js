const header__lucas=document.querySelector(".player-view-wrapper"),div__lucas=document.createElement("DIV");div__lucas.id="div__lucas";const h2__lucas=document.createElement("H2");h2__lucas.innerHTML="NOTAS DEL ALUMNO",header__lucas.appendChild(div__lucas),div__lucas.appendChild(h2__lucas);const addButton__lucas=document.createElement("BUTTON");addButton__lucas.id="agregaNota",addButton__lucas.innerHTML="Agregar Nota",div__lucas.appendChild(addButton__lucas);const inputNota__lucas=document.createElement("INPUT");inputNota__lucas.type="text",inputNota__lucas.id="inputNota",div__lucas.appendChild(inputNota__lucas);const divNotas__lucas=document.createElement("DIV");divNotas__lucas.id="divNotas",divNotas__lucas.setAttribute("style","overflow-y: auto;height: 70vh;"),div__lucas.appendChild(divNotas__lucas);class NotasClase{constructor(e,t,a){this.id=e,this.hora=t,this.nota=a}}let nameLS=document.getElementsByTagName("title")[0].innerHTML.replace(/ /g,"").slice(0,11);if(localStorage.getItem(`${nameLS}`))var arrayNotas=JSON.parse(localStorage.getItem(`${nameLS}`));else{arrayNotas=[];localStorage.setItem(`${nameLS}`,JSON.stringify([]))}function enviaLS(e){let t=JSON.parse(localStorage.getItem(`${nameLS}`));t.push(e),localStorage.setItem(`${nameLS}`,JSON.stringify(t)),console.log(t)}function agregaEventoBorrar(){document.querySelectorAll(".botonx").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();let a=e.previousElementSibling.innerHTML;previusNota=a.slice(10,a.length),previusHora=a.slice(0,8),e.parentNode.remove(),console.log("*****************************");let l=JSON.parse(localStorage.getItem(`${nameLS}`)),n=[],o=0;l.forEach(e=>{e.nota!=previusNota&&(e.id=o,n.push(e),o++)}),console.log("length Viejo "+l.length),console.log("length Nuevo "+n.length),localStorage.setItem(`${nameLS}`,JSON.stringify(n))})}),agregaEstilo()}function agregaEstilo(){document.querySelectorAll(".cadaNota").forEach(e=>{e.style.display="flex",e.style.justifyContent="space-around",e.style.alignItems="baseline"})}if(localStorage.getItem(`${nameLS}`)){let e=JSON.parse(localStorage.getItem(`${nameLS}`)).length,t=JSON.parse(localStorage.getItem(`${nameLS}`));null==e.length&&null==e.length&&0==e.length||(console.log(t),t.forEach(e=>{let t=e.hora,a=e.nota;console.log(e.hora+" "+e.nota);let l=document.createElement("DIV");l.className="cadaNota";let n=document.createElement("P");n.innerHTML=`${t}: ${a}`,l.appendChild(n);const o=document.createElement("BUTTON");o.className="botonx",o.innerHTML="x",o.style.height="20px",l.appendChild(o),divNotas__lucas.appendChild(l),agregaEventoBorrar()}))}agregaNota.addEventListener("click",()=>{let e=document.querySelector(".vjs-time-range-current"),t=document.createElement("DIV");t.className="cadaNota";let a=document.createElement("P"),l=document.querySelector("#inputNota");a.innerHTML=`${e.innerHTML}: ${l.value}`,t.appendChild(a);const n=document.createElement("BUTTON");n.className="botonx",n.innerHTML="x",n.style.height="20px",t.appendChild(n),divNotas__lucas.appendChild(t);let o=JSON.parse(localStorage.getItem(`${nameLS}`)).length;enviaLS(new NotasClase(o,e.innerHTML,l.value)),l.value="",agregaEventoBorrar()});